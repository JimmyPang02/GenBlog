(function(){"use strict";var e={1681:function(e,t,a){var o=a(9242),s=a(3396);function l(e,t,a,o,l,n){const r=(0,s.up)("router-view");return(0,s.wg)(),(0,s.j4)(r,{key:e.$route.fullPath})}var n=a(7139),r=a(7387),i=a.n(r);const u={login:"/api/login/",register:"/api/register/",UserInfo:"/api/get_current_user_info/",UserInfoByID:"/api/get_user_info_by_id/",isFollowed:"/api/is_followed/",follow:"/api/follow_user/",unfollow:"/api/unfollow_user/",followList:"/api/show_followers/",editProfile:"/api/modify_user_info/"};var c=u;const d="http://111.230.109.227:8000",p={state:{username:"",id:1,description:"",photo:"",followerCount:0,fanCount:0,postCount:0,access:"",is_login:!1},getters:{},mutations:{updateUser(e,t){e.id=t["当前用户id"],e.username=t["当前用户名"],e.photo=t["头像链接"],e.description=t["自我介绍"],e.followerCount=t["关注数"],e.fanCount=t["粉丝数"],e.postCount=t["文章数"],e.access=t.access,e.is_login=t.is_login,localStorage.setItem("access",t.access)},updateAccess(e,t){e.access=t.access},logout(e){e.id="",e.username="",e.photo="",e.description="",e.followerCount="",e.fanCount="",e.postCount="",e.access="",e.is_login=!1,localStorage.removeItem("access")}},actions:{getUserInfo(e,t){i().ajax({url:d+c.UserInfo,type:"POST",data:{access_token:t},success(a){"获取用户信息成功"==a.result?e.commit("updateUser",{...a,access:t,is_login:!0}):console.log(a)}})},login(e,t){i().ajax({url:d+c.login,type:"POST",data:{username:t.username,password:t.password},success(a){if("登录成功，生成jwt令牌"==a.result){const o=a.access_token;e.dispatch("getUserInfo",o),t.success()}else t.error(a.result)}})},register(e,t){i().ajax({url:d+c.register,type:"POST",data:{username:t.username,password:t.password,password_confirm:t.password2},success(e){"注册成功"==e.result?t.success():t.error(e.result)}})}},modules:{}};var m=p,v=(0,n.MT)({state:{},getters:{},mutations:{},actions:{created(e){console.log("created");const t=localStorage.getItem("access");t&&(e.commit("updateAccess",{access:t}),e.dispatch("getUserInfo",t))}},modules:{user:m}}),w={name:"App",created(){console.log("created");const e=localStorage.getItem("access");e&&(v.commit("updateAccess",{access:e}),v.dispatch("getUserInfo",e))}},f=a(89);const _=(0,f.Z)(w,[["render",l]]);var g=_,h=a(2483),k=a(2268);const y=e=>((0,s.dD)("data-v-1e28bda3"),e=e(),(0,s.Cn)(),e),b={class:"welcom"},U=y((()=>(0,s._)("div",null," 欢迎登陆 ",-1))),W={style:{color:"red"}},x=y((()=>(0,s._)("div",null," 登录 ",-1)));function I(e,t,a,l,n,r){const i=(0,s.up)("LoginOutlined"),u=(0,s.up)("a-icon"),c=(0,s.up)("a-input"),d=(0,s.up)("a-form-item"),p=(0,s.up)("a-input-password"),m=(0,s.up)("a-checkbox"),v=(0,s.up)("a-button"),w=(0,s.up)("a-form"),f=(0,s.up)("a-col"),_=(0,s.up)("a-row"),g=(0,s.up)("ContentBase");(0,s.up)("ContentBaseNcard");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(g,null,{default:(0,s.w5)((()=>[(0,s._)("div",b,[(0,s._)("div",null,[(0,s.Wm)(u,null,{default:(0,s.w5)((e=>[(0,s.Wm)(i)])),_:1})]),U]),(0,s.Wm)(_,{type:"flex",justify:"center",style:{"margin-top":"20px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(f,{span:8},{default:(0,s.w5)((()=>[(0,s.Wm)(w,{name:"basic","label-col":{span:4},"wrapper-col":{span:16},onSubmit:(0,o.iM)(l.login,["prevent"])},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{label:"用户名",name:"username",rules:[{required:!0,message:"请输入用户名！"}]},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{value:l.username,"onUpdate:value":t[0]||(t[0]=e=>l.username=e)},null,8,["value"])])),_:1}),(0,s.Wm)(d,{label:"密码",name:"password",rules:[{required:!0,message:"请输入密码！"}]},{default:(0,s.w5)((()=>[(0,s.Wm)(p,{value:l.password,"onUpdate:value":t[1]||(t[1]=e=>l.password=e)},null,8,["value"])])),_:1}),(0,s.Wm)(d,{name:"remember","wrapper-col":{offset:4,span:16}},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{checked:l.remember,"onUpdate:checked":t[2]||(t[2]=e=>l.remember=e)},{default:(0,s.w5)((()=>[(0,s.Uk)("Remember me")])),_:1},8,["checked"])])),_:1}),(0,s._)("div",W,(0,k.zw)(l.error_message),1),(0,s.Wm)(d,{"wrapper-col":{offset:4,span:16}},{default:(0,s.w5)((()=>[(0,s.Wm)(v,{type:"primary","html-type":"submit"},{default:(0,s.w5)((()=>[x])),_:1})])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1}),(0,s.kq)("",!0)],64)}a(7658);const S={class:"home"},D={class:"container"};function C(e,t,a,o,l,n){const r=(0,s.up)("a-card");return(0,s.wg)(),(0,s.iD)("div",S,[(0,s._)("div",D,[(0,s.Wm)(r,null,{default:(0,s.w5)((()=>[(0,s.WI)(e.$slots,"default",{},void 0,!0)])),_:3})])])}var H={name:"ContentBase"};const j=(0,f.Z)(H,[["render",C],["__scopeId","data-v-49c47962"]]);var O=j;const P={class:"home"},A={class:"container"};function Z(e,t,a,o,l,n){const r=(0,s.up)("a-card");return(0,s.wg)(),(0,s.iD)("div",P,[(0,s._)("div",A,[(0,s.Wm)(r,{bordered:"false"},{default:(0,s.w5)((()=>[(0,s.WI)(e.$slots,"default",{},void 0,!0)])),_:3})])])}var F={name:"ContentBaseNcard"};const T=(0,f.Z)(F,[["render",Z],["__scopeId","data-v-23397745"]]);var q=T,z=a(4870),N=a(851),B={name:"LoginView",components:{ContentBase:O,ContentBaseNcard:q,LoginOutlined:N.Z},setup(){const e=e=>{console.log("Success:",e)},t=e=>{console.log("Failed:",e)},a=(0,n.oR)();let o=(0,z.iH)(""),s=(0,z.iH)(""),l=(0,z.iH)(!0),r=(0,z.iH)("");const i=()=>{r.value="",a.dispatch("login",{username:o.value,password:s.value,success(){console.log("success"),bo.push({name:"home"})},error(){console.log("failed"),r.value="用户名或密码错误"}})};return{onFinish:e,onFinishFailed:t,username:o,password:s,remember:l,login:i,error_message:r}}};const M=(0,f.Z)(B,[["render",I],["__scopeId","data-v-1e28bda3"]]);var R=M;const V=e=>((0,s.dD)("data-v-02f00fa2"),e=e(),(0,s.Cn)(),e),Y=V((()=>(0,s._)("div",{style:{"text-align":"center","font-size":"24px","margin-top":"50px"}}," 欢迎注册 ",-1))),L={style:{color:"red"}};function $(e,t,a,l,n,r){const i=(0,s.up)("a-input"),u=(0,s.up)("a-form-item"),c=(0,s.up)("a-input-password"),d=(0,s.up)("a-button"),p=(0,s.up)("a-form"),m=(0,s.up)("a-col"),v=(0,s.up)("a-row"),w=(0,s.up)("ContentBase");return(0,s.wg)(),(0,s.j4)(w,null,{default:(0,s.w5)((()=>[Y,(0,s.Wm)(v,{type:"flex",justify:"center",style:{"margin-top":"20px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{span:8},{default:(0,s.w5)((()=>[(0,s.Wm)(p,{name:"basic","label-col":{span:4},"wrapper-col":{span:16},onSubmit:(0,o.iM)(l.register,["prevent"])},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{label:"用户名",name:"username",rules:[{required:!0,message:"请输入用户名！"}]},{default:(0,s.w5)((()=>[(0,s.Wm)(i,{value:l.username,"onUpdate:value":t[0]||(t[0]=e=>l.username=e)},null,8,["value"])])),_:1}),(0,s.Wm)(u,{label:"密码",name:"password",rules:[{required:!0,message:"请输入密码！"}]},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{value:l.password,"onUpdate:value":t[1]||(t[1]=e=>l.password=e)},null,8,["value"])])),_:1}),(0,s.Wm)(u,{label:"确认密码",name:"password2",rules:[{required:!0,message:"请再次输入密码！"}]},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{value:l.password2,"onUpdate:value":t[2]||(t[2]=e=>l.password2=e)},null,8,["value"])])),_:1}),(0,s._)("div",L,(0,k.zw)(l.error_message),1),(0,s.Wm)(u,{"wrapper-col":{offset:4,span:16}},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{type:"primary","html-type":"submit"},{default:(0,s.w5)((()=>[(0,s.Uk)("注册")])),_:1})])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1})}var E={name:"RegisterView",components:{ContentBase:O},setup(){const e=(0,n.oR)();let t=(0,z.iH)(""),a=(0,z.iH)(""),o=(0,z.iH)(""),s=(0,z.iH)("");const l=()=>{s.value="",e.dispatch("register",{username:t.value,password:a.value,password2:o.value,success(){console.log("success"),bo.push({name:"login"})},error(e){s.value=e}})};return{username:t,password:a,password2:o,register:l,error_message:s}}};const K=(0,f.Z)(E,[["render",$],["__scopeId","data-v-02f00fa2"]]);var G=K;function J(e,t,a,o,l,n){const r=(0,s.up)("ContentBase");return(0,s.wg)(),(0,s.j4)(r,null,{default:(0,s.w5)((()=>[(0,s.Uk)(" 404 ")])),_:1})}var Q={name:"NotFoundView",components:{ContentBase:O}};const X=(0,f.Z)(Q,[["render",J]]);var ee=X;const te={class:"username"},ae={class:"description"};function oe(e,t,a,o,l,n){const r=(0,s.up)("a-avatar"),i=(0,s.up)("a-col"),u=(0,s.up)("a-row"),c=(0,s.up)("a-card"),d=(0,s.up)("ContentBase");return(0,s.wg)(),(0,s.j4)(d,null,{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.users,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"user-card",key:e.id},[(0,s.Wm)(c,{onClick:t=>o.open_user_profile(e["当前用户id"])},{default:(0,s.w5)((()=>[(0,s.Wm)(u,null,{default:(0,s.w5)((()=>[(0,s.Wm)(i,{span:4},{default:(0,s.w5)((()=>[(0,s.Wm)(r,{src:e["头像链接"],size:50},null,8,["src"])])),_:2},1024),(0,s.Wm)(i,{span:20},{default:(0,s.w5)((()=>[(0,s._)("div",te,(0,k.zw)(e["当前用户名"]),1),(0,s._)("div",ae,(0,k.zw)(e["自我介绍"]),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])])))),128))])),_:1})}var se={name:"FollowList",components:{ContentBase:O},props:{userID:{type:Number,required:!0}},setup(e){const t=(0,n.oR)();console.log("进入关注列表界面"),console.log("当前用户为："+e.userID);let a=(0,z.iH)([]);i().ajax({url:d+c.followList,type:"POST",data:{user_id:e.userID},success(e){"获取关注用户列表成功"==e.result?(a.value=e.followed_user_info_list,console.log("获取关注用户列表成功")):console.log("获取关注用户列表失败")}});const o=e=>{t.state.user.is_login?bo.push({name:"userprofile",params:{userID:e}}):bo.push({name:"login"})};return{users:a,open_user_profile:o}}};const le=(0,f.Z)(se,[["render",oe],["__scopeId","data-v-2c62ce7a"]]);var ne=le;const re={key:0},ie={key:1},ue={key:0},ce={key:1};function de(e,t,a,o,l,n){const r=(0,s.up)("Navigation"),i=(0,s.up)("UserProfileInfo"),u=(0,s.up)("a-col"),c=(0,s.up)("AppstoreOutlined"),d=(0,s.up)("TeamOutlined"),p=(0,s.up)("a-menu-item"),m=(0,s.up)("FormOutlined"),v=(0,s.up)("a-menu"),w=(0,s.up)("FollowList"),f=(0,s.up)("MyArticlePage"),_=(0,s.up)("a-card"),g=(0,s.up)("a-row"),h=(0,s.up)("ContentBaseNcard");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(r),(0,s.Wm)(h,null,{default:(0,s.w5)((()=>[(0,s.Wm)(g,{gutter:16},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{span:6},{default:(0,s.w5)((()=>[(0,s.Wm)(i,{onFollow:o.follow,onUnfollow:o.unfollow,onSave:o.save,user:o.user},null,8,["onFollow","onUnfollow","onSave","user"])])),_:1}),(0,s.Wm)(u,{span:18},{default:(0,s.w5)((()=>[(0,s.Wm)(_,{bordered:!0,style:{width:"100%",margin:"30px auto","box-shadow":"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)"}},{default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s.Wm)(v,{mode:"horizontal"},{default:(0,s.w5)((()=>[(0,s.Wm)(p,{key:"followlist",onClick:t[0]||(t[0]=e=>o.selectMenu("followlist"))},{icon:(0,s.w5)((()=>[(0,s.Wm)(c)])),default:(0,s.w5)((()=>[(0,s.Wm)(d),(0,s.Uk)(" 关注列表 ")])),_:1}),o.is_me?((0,s.wg)(),(0,s.iD)("div",re,[(0,s.Wm)(p,{key:"myposts",onClick:t[1]||(t[1]=e=>o.selectMenu("myposts"))},{default:(0,s.w5)((()=>[(0,s.Wm)(m),(0,s.Uk)(" 我的文章 ")])),_:1})])):((0,s.wg)(),(0,s.iD)("div",ie,[(0,s.Wm)(p,{key:"myposts",onClick:t[2]||(t[2]=e=>o.selectMenu("myposts"))},{default:(0,s.w5)((()=>[(0,s.Wm)(m),(0,s.Uk)(" 他的文章 ")])),_:1})]))])),_:1})]),"followlist"===o.Current?((0,s.wg)(),(0,s.iD)("div",ue,[(0,s.Wm)(w,{userID:o.userID},null,8,["userID"])])):(0,s.kq)("",!0),"myposts"===o.Current?((0,s.wg)(),(0,s.iD)("div",ce,[(0,s.Wm)(f,{authorID:o.userID},null,8,["authorID"])])):(0,s.kq)("",!0)])),_:1})])),_:1})])),_:1})])),_:1})],64)}const pe={class:"user-info"},me={class:"user-details"},ve={class:"username"},we={class:"userintro"},fe={class:"user-stats"},_e={class:"user-actions"},ge={key:0},he={class:"user-info",style:{"text-align":"center"}},ke={class:"user-details"},ye={class:"userintro"},be={class:"userintro"},Ue={key:1};function We(e,t,a,o,l,n){const r=(0,s.up)("a-avatar"),i=(0,s.up)("a-divider"),u=(0,s.up)("TeamOutlined"),c=(0,s.up)("a-statistic"),d=(0,s.up)("a-col"),p=(0,s.up)("FormOutlined"),m=(0,s.up)("a-row"),v=(0,s.up)("a-button"),w=(0,s.up)("a-input"),f=(0,s.up)("a-modal"),_=(0,s.up)("UserAddOutlined"),g=(0,s.up)("UserDeleteOutlined"),h=(0,s.up)("a-icon"),y=(0,s.up)("a-card");return(0,s.wg)(),(0,s.j4)(y,{bordered:!0,style:{width:"100%",margin:"30px auto","box-shadow":"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)","text-align":"center"}},{default:(0,s.w5)((()=>[(0,s._)("div",pe,[(0,s.Wm)(r,{src:a.user.photo,size:{xs:70,sm:80,md:100,lg:130,xl:150,xxl:170}},null,8,["src"]),(0,s._)("div",me,[(0,s._)("h2",ve,(0,k.zw)(a.user.username),1),(0,s._)("h5",we,(0,k.zw)(a.user.description?a.user.description:"这个人很懒,没有留下简介"),1)])]),(0,s.Wm)(i,{style:{margin:"16px 0"}}),(0,s._)("div",fe,[(0,s.Wm)(m,{gutter:8},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{span:8},{default:(0,s.w5)((()=>[(0,s.Wm)(u),(0,s.Wm)(c,{title:"关注",value:a.user.followerCount},null,8,["value"])])),_:1}),(0,s.Wm)(d,{span:8},{default:(0,s.w5)((()=>[(0,s.Wm)(u),(0,s.Wm)(c,{title:"粉丝",value:a.user.fanCount},null,8,["value"])])),_:1}),(0,s.Wm)(d,{span:8},{default:(0,s.w5)((()=>[(0,s.Wm)(p),(0,s.Wm)(c,{title:"文章",value:a.user.postCount},null,8,["value"])])),_:1})])),_:1})]),(0,s._)("div",_e,[o.is_me?((0,s.wg)(),(0,s.iD)("div",ge,[(0,s.Wm)(v,{class:"action-button",size:"middle",type:"primary",onClick:o.showEditbox},{default:(0,s.w5)((()=>[(0,s.Wm)(p),(0,s.Uk)(" 编辑个人资料 ")])),_:1},8,["onClick"]),(0,s.Wm)(f,{visible:o.visible,"onUpdate:visible":t[2]||(t[2]=e=>o.visible=e),title:"编辑个人资料","ok-text":o.isEditing?"保存":"确定","cancel-text":o.isEditing?"取消":"关闭",onOk:o.handleSave,onCancel:o.handleCancel},{default:(0,s.w5)((()=>[(0,s._)("div",he,[(0,s.Wm)(r,{src:o.editedUser.photo,size:{xs:70,sm:80,md:100,lg:130,xl:150,xxl:170}},null,8,["src"]),(0,s._)("div",ke,[(0,s._)("h5",ye,[(0,s.Wm)(w,{value:o.editedUser.photo,"onUpdate:value":t[0]||(t[0]=e=>o.editedUser.photo=e),rows:4,placeholder:"图片URL"},null,8,["value"])]),(0,s._)("h5",be,[(0,s.Wm)(w,{value:o.editedUser.description,"onUpdate:value":t[1]||(t[1]=e=>o.editedUser.description=e),rows:4,placeholder:"这个人很懒，没有留下简介"},null,8,["value"])])])])])),_:1},8,["visible","ok-text","cancel-text","onOk","onCancel"])])):((0,s.wg)(),(0,s.iD)("div",Ue,[a.user.is_followed?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(v,{key:0,class:"action-button",size:"middle",type:"primary",onClick:o.follow},{default:(0,s.w5)((()=>[(0,s.Wm)(_),(0,s.Uk)(" 关注 ")])),_:1},8,["onClick"])),a.user.is_followed?((0,s.wg)(),(0,s.j4)(v,{key:1,class:"action-button",size:"middle",onClick:o.unfollow},{default:(0,s.w5)((()=>[(0,s.Wm)(g),(0,s.Uk)(" 取消关注 ")])),_:1},8,["onClick"])):(0,s.kq)("",!0)])),(0,s.Wm)(h,{type:"plus"})])])),_:1})}var xe=a(6110),Ie=a(4053),Se=a(9427),De=a(6374),Ce={name:"UserProfileInfo",components:{UserAddOutlined:xe.Z,TeamOutlined:Ie.Z,FormOutlined:Se.Z,UserDeleteOutlined:De.Z},props:{user:{type:Object,required:!0}},setup(e,t){const a=(0,n.oR)(),o=(0,s.Fl)((()=>e.user.id==a.state.user.id));let l=(0,z.iH)(!1),r=(0,z.iH)(!1),u=(0,z.qj)({});const p=()=>{l.value=!0,r.value=!1,u.description=e.user.description,u.photo=e.user.photo},m=()=>{r.value?(console.log(u),i().ajax({url:d+c.editProfile,type:"POST",data:{access_token:a.state.user.access,self_introduction:u.description,avatar_url:u.photo},success(e){"修改用户信息成功"==e.result?(t.emit("save",u),console.log("修改用户信息成功")):console.log("修改用户信息失败")}}),r.value=!1,l.value=!1):r.value=!0},v=()=>{r.value?(r.value=!1,u.description=e.user.description,u.photo=e.user.photo):l.value=!1},w=()=>{i().ajax({url:d+c.follow,type:"POST",data:{access_token:a.state.user.access,follow_user_id:e.user.id},success(e){"关注用户成功"==e.result?(t.emit("follow"),console.log("关注成功")):console.log("关注失败")}})},f=()=>i().ajax({url:d+c.unfollow,type:"POST",data:{access_token:a.state.user.access,unfollow_user_id:e.user.id},success(e){"取消关注用户成功"==e.result?(t.emit("unfollow"),console.log("取消关注成功")):console.log("取消关注失败")}});return{follow:w,unfollow:f,is_me:o,showEditbox:p,handleSave:m,handleCancel:v,visible:l,isEditing:r,editedUser:u}}};const He=(0,f.Z)(Ce,[["render",We],["__scopeId","data-v-795a4838"]]);var je=He;const Oe={class:"recent-posts",id:"recent-posts"},Pe={key:0,class:"buttons"};function Ae(e,t,a,o,l,n){const r=(0,s.up)("recentPostItem"),i=(0,s.up)("a-button");return(0,s.wg)(),(0,s.iD)("div",Oe,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.array,(t=>((0,s.wg)(),(0,s.iD)("div",{class:"item",key:t["文章id"]},[(0,s.Wm)(r,{title:t["文章标题"],pageImg:t["图片url"],publishTime:t["更新时间"],briefInfo:t["文章内容"],author:t["文章作者"],id:t["文章id"]},null,8,["title","pageImg","publishTime","briefInfo","author","id"]),a.authorID===e.$store.state.user.id?((0,s.wg)(),(0,s.iD)("div",Pe,[(0,s.Wm)(i,{type:"primary",id:"edit",onClick:e=>n.editArticle(t["文章id"])},{default:(0,s.w5)((()=>[(0,s.Uk)("编辑")])),_:2},1032,["onClick"]),(0,s.Wm)(i,{danger:"",id:"delete",onClick:e=>n.deleteArticle(t["文章id"])},{default:(0,s.w5)((()=>[(0,s.Uk)("删除")])),_:2},1032,["onClick"])])):(0,s.kq)("",!0)])))),128))])}var Ze=a(252),Fe=a(1504);const Te={key:0,class:"recent-post-item"},qe={class:"post-cover-left"},ze=["src"],Ne={class:"recent-post-info"},Be={class:"artical-meta-wrap"},Me={class:"post-meta-date"},Re={class:"content"},Ve={key:1,class:"recent-post-item"},Ye={class:"recent-post-info"},Le={class:"artical-meta-wrap"},$e={class:"post-meta-date"},Ee={class:"content"},Ke={class:"post-cover-left"},Ge=["src"],Je={props:{title:String,publishTime:String,briefInfo:String,author:String,pageImg:String,id:Number}};var Qe=Object.assign(Je,{__name:"recentPostItem",setup(e){return(t,a)=>{const o=(0,s.up)("router-link");return e.id%2===1?((0,s.wg)(),(0,s.iD)("div",Te,[(0,s._)("div",qe,[(0,s.Wm)(o,{to:{name:"article",params:{articleID:e.id}}},{default:(0,s.w5)((()=>[(0,s._)("img",{src:e.pageImg,alt:"",class:"post-img"},null,8,ze)])),_:1},8,["to"])]),(0,s._)("div",Ne,[(0,s.Wm)(o,{to:{name:"article",params:{articleID:e.id}},class:"article-title"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,k.zw)(e.title),1)])),_:1},8,["to"]),(0,s._)("div",Be,[(0,s._)("span",Me,[(0,s.Uk)((0,k.zw)(e.author)+"|",1),(0,s.Wm)((0,z.SU)(Fe.Z)),(0,s.Uk)("发表于 "+(0,k.zw)(e.publishTime),1)])]),(0,s._)("div",Re,(0,k.zw)(e.briefInfo.slice(0,20)+"..."),1)])])):((0,s.wg)(),(0,s.iD)("div",Ve,[(0,s._)("div",Ye,[(0,s.Wm)(o,{to:{name:"article",params:{articleID:e.id}},class:"article-title"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,k.zw)(e.title),1)])),_:1},8,["to"]),(0,s._)("div",Le,[(0,s._)("span",$e,[(0,s.Uk)((0,k.zw)(e.author)+"|",1),(0,s.Wm)((0,z.SU)(Fe.Z)),(0,s.Uk)("发表于 "+(0,k.zw)(e.publishTime),1)])]),(0,s._)("div",Ee,(0,k.zw)(e.briefInfo.slice(0,10)+"..."),1)]),(0,s._)("div",Ke,[(0,s.Wm)(o,{to:{name:"article",params:{articleID:e.id}}},{default:(0,s.w5)((()=>[(0,s._)("img",{src:e.pageImg,alt:"",class:"post-img"},null,8,Ge)])),_:1},8,["to"])])]))}}});const Xe=(0,f.Z)(Qe,[["__scopeId","data-v-46604354"]]);var et=Xe,tt={components:{recentPostItem:et},setup(){let e=(0,n.oR)();const t=e.state.user.access,a=e.state.user.id;return{token:t,userID:a}},props:{authorID:Number},data(){return{array:[]}},methods:{deleteArticle(e){console.log("userID:"+this.userID),console.log("token: "+this.token);var t=new Headers;t.append("User-Agent","Apifox/1.0.0 (https://www.apifox.cn)");var a=new FormData;a.append("access_token",this.token),a.append("article_id",e);var o={method:"POST",headers:t,body:a,redirect:"follow"};fetch("http://111.230.109.227:8000/api/delete_article_by_id/",o).then((e=>e.json())).then((e=>{Ze.ZP.info(e["result"]),console.log("")})).catch((e=>console.log("error",e))),this.initArticle()},initArticle(){var e=new Headers;e.append("User-Agent","Apifox/1.0.0 (https://www.apifox.cn)");var t=new FormData;t.append("user_id",this.authorID);var a={method:"POST",headers:e,body:t,redirect:"follow"};fetch("http://111.230.109.227:8000/api/show_articles/",a).then((e=>e.json())).then((e=>{console.log(e),this.array=e["文章列表"],console.log(this.array)})).catch((e=>console.log("error",e))),console.log("authorId:"+this.authorID)},editArticle(e){bo.push({name:"articleModify",params:{articleID:e}})}},mounted(){this.initArticle()}};const at=(0,f.Z)(tt,[["render",Ae],["__scopeId","data-v-d3d807b8"]]);var ot=at;const st={class:"layout"},lt={id:"recent-post"},nt={props:{authorID:Number},mounted(){console.log("authorID:"+this.authorID)}};var rt=Object.assign(nt,{__name:"MyArticlePage",setup(e){return(t,a)=>((0,s.wg)(),(0,s.iD)("main",st,[(0,s._)("div",lt,[e.authorID?((0,s.wg)(),(0,s.j4)(ot,{key:0,authorID:e.authorID},null,8,["authorID"])):(0,s.kq)("",!0)])]))}});const it=(0,f.Z)(rt,[["__scopeId","data-v-5dde552b"]]);var ut=it,ct=a.p+"img/aichat.cda5f3c2.png",dt={__name:"SearchView",setup(e){const t=(0,z.iH)(""),a=e=>{console.log("use value",e),console.log("or use this.value",t.value),e?(i(e),l()):Ze.ZP.info("搜索内容为空")},o=(0,z.iH)(!1),l=()=>{o.value=!0},n=e=>{console.log(e),o.value=!1};let r=(0,z.iH)();function i(e){var t=new Headers;t.append("User-Agent","Apifox/1.0.0 (https://www.apifox.cn)");var a=new FormData;a.append("keyword",e);var o={method:"POST",headers:t,body:a,redirect:"follow"};fetch("http://111.230.109.227:8000/api/search_article_by_keyword/",o).then((e=>e.json())).then((e=>{r.value=e["文章列表"],console.log(r.value)})).catch((e=>console.log("error",e)))}return(e,l)=>{const i=(0,s.up)("a-input-search"),u=(0,s.up)("a-space"),c=(0,s.up)("a-modal");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(u,{direction:"vertical"},{default:(0,s.w5)((()=>[(0,s.Wm)(i,{modelValue:t.value,"onUpdate:modelValue":l[0]||(l[0]=e=>t.value=e),placeholder:"input search text",style:{width:"200px"},onSearch:a},null,8,["modelValue"])])),_:1}),(0,s._)("div",null,[(0,s.Wm)(c,{visible:o.value,"onUpdate:visible":l[1]||(l[1]=e=>o.value=e),width:"1000px",title:"搜索结果",onOk:n,class:"layout"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,z.SU)(r),(e=>((0,s.wg)(),(0,s.iD)("div",{class:"item",key:e["文章id"]},[(0,s.Wm)(et,{title:e["文章标题"],pageImg:e["图片url"],publishTime:e["更新时间"],briefInfo:e["文章内容"],author:e["文章作者"],id:e["文章id"]},null,8,["title","pageImg","publishTime","briefInfo","author","id"])])))),128))])),_:1},8,["visible"])])],64)}}};const pt=(0,f.Z)(dt,[["__scopeId","data-v-5d922738"]]);var mt=pt,vt=a(5050),wt=a(1354),ft=a(3318),_t=a(5101);const gt=e=>((0,s.dD)("data-v-40fb178e"),e=e(),(0,s.Cn)(),e),ht={class:"container"},kt={id:"blog-info"},yt=gt((()=>(0,s._)("div",{class:"blog-img"},[(0,s._)("img",{src:ct,alt:"图像"})],-1))),bt=gt((()=>(0,s._)("span",{class:"site-name"},"Gen-Blog",-1))),Ut={id:"menus"},Wt={id:"search-button"},xt={id:"menus-items"},It={key:0},St={key:1};var Dt={__name:"navigationView",setup(e){const t=(0,n.oR)(),a=()=>{t.commit("logout"),console.log("test")};return(e,t)=>{const o=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("nav",ht,[(0,s._)("div",kt,[yt,(0,s.Wm)(o,{to:"/"},{default:(0,s.w5)((()=>[bt])),_:1})]),(0,s._)("div",Ut,[(0,s._)("span",Wt,[(0,s.Wm)(mt)]),(0,s._)("span",xt,[(0,s._)("span",null,[(0,s.Wm)((0,z.SU)(vt.Z)),(0,s.Wm)(o,{to:"/"},{default:(0,s.w5)((()=>[(0,s.Uk)("首页")])),_:1})]),e.$store.state.user.is_login?((0,s.wg)(),(0,s.iD)("span",St,[(0,s._)("span",null,[(0,s.Wm)((0,z.SU)(wt.Z)),(0,s.Wm)(o,{to:{name:"userprofile",params:{userID:e.$store.state.user.id}}},{default:(0,s.w5)((()=>[(0,s.Uk)("个人主页 ")])),_:1},8,["to"])]),(0,s._)("span",null,[(0,s.Wm)((0,z.SU)(ft.Z)),(0,s.Uk)(),(0,s.Wm)(o,{to:"/writecenter"},{default:(0,s.w5)((()=>[(0,s.Uk)("创作中心")])),_:1})]),(0,s._)("span",null,[(0,s.Wm)((0,z.SU)(N.Z)),(0,s.Uk)(),(0,s.Wm)(o,{to:{name:"userprofile",params:{userID:e.$store.state.user.id}}},{default:(0,s.w5)((()=>[(0,s.Uk)((0,k.zw)(e.$store.state.user.username),1)])),_:1},8,["to"])]),(0,s._)("span",null,[(0,s.Wm)((0,z.SU)(_t.Z)),(0,s.Wm)(o,{class:"nav-link",to:{name:"home"},onClick:a},{default:(0,s.w5)((()=>[(0,s.Uk)("退出")])),_:1})])])):((0,s.wg)(),(0,s.iD)("span",It,[(0,s._)("span",null,[(0,s.Wm)((0,z.SU)(wt.Z)),(0,s.Wm)(o,{to:"/login"},{default:(0,s.w5)((()=>[(0,s.Uk)("个人主页")])),_:1})]),(0,s._)("span",null,[(0,s.Wm)((0,z.SU)(ft.Z)),(0,s.Uk)(),(0,s.Wm)(o,{to:"/login"},{default:(0,s.w5)((()=>[(0,s.Uk)("创作中心")])),_:1})]),(0,s._)("span",null,[(0,s.Wm)((0,z.SU)(N.Z)),(0,s.Uk)(),(0,s.Wm)(o,{to:"/login"},{default:(0,s.w5)((()=>[(0,s.Uk)("登录")])),_:1})]),(0,s._)("span",null,[(0,s.Wm)((0,z.SU)(_t.Z)),(0,s.Wm)(o,{to:"/register"},{default:(0,s.w5)((()=>[(0,s.Uk)("注册")])),_:1})])]))])])])}}};const Ct=(0,f.Z)(Dt,[["__scopeId","data-v-40fb178e"]]);var Ht=Ct,jt={name:"UserProfile",components:{ContentBaseNcard:q,UserProfileInfo:je,FollowList:ne,MyArticlePage:ut,TeamOutlined:Ie.Z,FormOutlined:Se.Z,Navigation:Ht},setup(){let e=(0,z.iH)("followlist");const t=t=>{e.value=t},a=(0,n.oR)(),o=(0,h.yj)(),l=parseInt(o.params.userID),r=(0,z.qj)({}),u=(0,s.Fl)((()=>l==a.state.user.id));i().ajax({url:d+c.UserInfoByID,type:"POST",data:{user_id:l},success(e){r.id=e["当前用户id"],r.username=e["当前用户名"],r.description=e["自我介绍"],r.photo=e["头像链接"],r.followerCount=e["关注数"],r.fanCount=e["粉丝数"],r.postCount=e["文章数"]}}),i().ajax({url:d+c.isFollowed,type:"POST",data:{access_token:a.state.user.access,user_id:l},success(e){r.is_followed=e.isfollowed}});const p=()=>{r.is_followed=!0,r.followerCount=r.followerCount+1},m=()=>{r.is_followed=!1,r.followerCount=r.followerCount-1},v=e=>{r.description=e.description,r.photo=e.photo};return{selectMenu:t,Current:e,userID:l,user:r,follow:p,unfollow:m,is_me:u,save:v}}};const Ot=(0,f.Z)(jt,[["render",de]]);var Pt=Ot,At=a(5747);const Zt=e=>((0,s.dD)("data-v-3373db8c"),e=e(),(0,s.Cn)(),e),Ft=Zt((()=>(0,s._)("div",{id:"site-info"},[(0,s._)("h1",{id:"site-title",style:{color:"white"}},"Gen-Blog"),(0,s._)("div",{id:"site-subtitle"}," 一款AI生成式轻博客网站 ")],-1))),Tt={id:"scroll-down"};var qt={__name:"pageHeader",setup(e){return(e,t)=>((0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(Ht),Ft,(0,s._)("div",Tt,[(0,s.Wm)((0,z.SU)(At.Z))])],64))}};const zt=(0,f.Z)(qt,[["__scopeId","data-v-3373db8c"]]);var Nt=zt;const Bt={class:"full-page",id:"page-header"},Mt={class:"layout"},Rt={class:"first-page-article"};var Vt={__name:"HeadPage",setup(e){let t=(0,z.iH)(),a=(0,z.iH)(),o="http://111.230.109.227:8000/api/get_random_ten_articles/";return fetch(o,{method:"get"}).then((e=>e.json())).then((e=>{console.log(e["文章列表"]),a.value=e["文章数目"],t.value=e["文章列表"],console.log(t.value)})),console.log("文章数："+a.value),console.log("文章列表"+t.value),(e,a)=>((0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("header",Bt,[(0,s.Wm)(Nt)]),(0,s._)("main",Mt,[(0,s._)("div",Rt,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,z.SU)(t),(e=>((0,s.wg)(),(0,s.j4)(et,{title:e["文章标题"],pageImg:e["图片url"],publishTime:e["更新时间"],briefInfo:e["文章内容"],author:e["文章作者"],key:e["文章id"],id:e["文章id"]},null,8,["title","pageImg","publishTime","briefInfo","author","id"])))),128))])])],64))}};const Yt=(0,f.Z)(Vt,[["__scopeId","data-v-7fe1bbf8"]]);var Lt=Yt,$t=a(6939);const Et=e=>((0,s.dD)("data-v-445185d6"),e=e(),(0,s.Cn)(),e),Kt={id:"airead"},Gt=Et((()=>(0,s._)("div",{class:"ai-img is-center"},[(0,s._)("img",{src:ct,alt:"图像"})],-1))),Jt=Et((()=>(0,s._)("h2",{class:"is-center"},"AI交互",-1))),Qt={class:"ai-content"},Xt={class:"input"};var ea={__name:"AiReadCard",props:{text:String},setup(e){const t=e,a=(0,n.oR)();let o=(0,z.iH)(),l=(0,z.iH)(),r=(0,z.iH)(!1);const i=()=>{Ze.ZP.info("使用该功能请先登录")};function u(){if(a.state.user.is_login)if(t.text)if(o.value){r.value=!0,console.log("text:"+t.text),console.log("gpt hat start");var e=new Headers;e.append("User-Agent","Apifox/1.0.0 (https://www.apifox.cn)");var s=new FormData;if(s.append("access_token",a.state.user.access),o.value){console.log("问题："+o.value),s.append("gpt_message","回答有关给定文章的问题，问题如下:"+o.value+"。文章内容如下（注意文章是用markdown格式书写的）："+t.text);var n={method:"POST",headers:e,body:s,redirect:"follow"};fetch("http://111.230.109.227:8000/api/gpt_for_chat/",n).then((e=>e.json())).then((e=>{console.log(e),r.value=!1,l.value=e["gpt_response"]})).catch((e=>console.log("error",e)))}else l.value="输入的问题为空"}else Ze.ZP.info("输入的问题为空");else Ze.ZP.info("文本内容为空");else i()}return(e,t)=>{const a=(0,s.up)("a-spin"),n=(0,s.up)("a-textarea"),i=(0,s.up)("a-button");return(0,s.wg)(),(0,s.iD)("div",Kt,[Gt,Jt,(0,s._)("div",Qt,[(0,z.SU)(r)?((0,s.wg)(),(0,s.j4)(a,{key:0})):(0,s.kq)("",!0),(0,s.Uk)((0,k.zw)((0,z.SU)(l)),1)]),(0,s._)("div",Xt,[(0,s.Wm)(n,{value:(0,z.SU)(o),"onUpdate:value":t[0]||(t[0]=e=>(0,z.dq)(o)?o.value=e:o=e),placeholder:"有问题尽管问我","auto-size":{minRows:1,maxRows:5}},null,8,["value"]),(0,s.Wm)(i,{type:"primary",onClick:u},{default:(0,s.w5)((()=>[(0,s.Wm)((0,z.SU)($t.Z))])),_:1})])])}}};const ta=(0,f.Z)(ea,[["__scopeId","data-v-445185d6"]]);var aa=ta,oa=a(7709),sa=a.n(oa),la=a(9498),na=a.n(la),ra=a(654),ia=a.n(ra),ua=a(7592),ca=a.n(ua);const da={class:"navigation"},pa={class:"layout"},ma={id:"recent-post"},va={id:"post"},wa={id:"article-container"},fa={id:"aside-content"},_a={class:"sticky"},ga={id:"aside-button"},ha={class:"submit-modal"},ka={class:"text-contain"},ya={class:"text-contain"};var ba={__name:"WriteCenter",setup(e){sa().use(ia(),{Hljs:ca()}),na().use(ia(),{Hljs:ca()});const t=(0,n.oR)(),a=(0,z.iH)(!1),o=(0,z.iH)(!1),l=(0,z.iH)(!1),r=(0,z.iH)(!1),i=(0,z.iH)(!0),u=()=>{p.value?(console.log("show modal"),o.value=!0):Ze.ZP.info("文章内容为空")},c=()=>{a.value=!0,console.log("text"+p.value),console.log("title"+m.value),setTimeout((()=>{a.value=!1,o.value=!1,f()}),2e3)},d=()=>{o.value=!1};let p=(0,z.iH)(""),m=(0,z.iH)(""),v=(0,z.iH)("");function w(e,t){console.log("successfully saved"),console.log(e),console.log(t)}function f(){var e=new Headers;e.append("User-Agent","Apifox/1.0.0 (https://www.apifox.cn)");var a=new FormData;a.append("article_title",m.value),a.append("article_content",p.value),a.append("access_token",t.state.user.access),a.append("image_url","https://s3.bmp.ovh/imgs/2023/05/30/0187ff90a351d527.webp");var o={method:"POST",headers:e,body:a,redirect:"follow"},s=0;fetch("http://111.230.109.227:8000/api/create_article/",o).then((e=>e.json())).then((e=>{console.log(e),console.log("successfully published"),s=e["文章编号:"],console.log("文章id:"+e["文章编号:"]),bo.push({name:"article",params:{articleID:s}})})).catch((e=>console.log("error",e)))}function _(){if(p.value){i.value=!0,l.value=!0;var e=new Headers;e.append("User-Agent","Apifox/1.0.0 (https://www.apifox.cn)");var a=new FormData;a.append("access_token",t.state.user.access),a.append("gpt_message","润色一下给定文章，使文章表述更清晰，内容更规整有序。注意文章采用markdown格式书写, 返回的文章要分点，排版要美观，文章内容如下："+p.value);var o={method:"POST",headers:e,body:a,redirect:"follow"};fetch("http://111.230.109.227:8000/api/gpt_for_chat/",o).then((e=>e.json())).then((e=>{console.log(e),i.value=!1,v.value=e["gpt_response"]})).catch((e=>console.log("error",e)))}else Ze.ZP.info("文章内容为空")}function g(){if(p.value){i.value=!0,r.value=!0;var e=new Headers;e.append("User-Agent","Apifox/1.0.0 (https://www.apifox.cn)");var a=new FormData;a.append("access_token",t.state.user.access),a.append("gpt_message","补充续写一下给定文章，内容更完整。注意文章采用markdown格式书写, 返回的文章要分点，排版要美观，文章内容如下："+p.value);var o={method:"POST",headers:e,body:a,redirect:"follow"};fetch("http://111.230.109.227:8000/api/gpt_for_chat/",o).then((e=>e.json())).then((e=>{console.log(e),i.value=!1,v.value=p.value+"\n"+e["gpt_response"]})).catch((e=>console.log("error",e)))}else Ze.ZP.info("文章内容为空")}const h=()=>{l.value=!1,r.value=!1};function k(){p.value=v.value,h()}return(e,t)=>{const n=(0,s.up)("a-button"),f=(0,s.up)("a-input"),y=(0,s.up)("a-input-group"),b=(0,s.up)("a-modal"),U=(0,s.up)("a-spin"),W=(0,s.up)("a-drawer");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("header",da,[(0,s.Wm)(Ht)]),(0,s._)("main",pa,[(0,s._)("div",ma,[(0,s._)("div",va,[(0,s._)("div",wa,[(0,s.Wm)((0,z.SU)(sa()),{modelValue:(0,z.SU)(p),"onUpdate:modelValue":t[0]||(t[0]=e=>(0,z.dq)(p)?p.value=e:p=e),height:"600px",onSave:w},null,8,["modelValue"])])])]),(0,s._)("div",fa,[(0,s._)("div",_a,[(0,s.Wm)(aa,{text:(0,z.SU)(p)},null,8,["text"]),(0,s._)("div",ga,[(0,s.Wm)(n,{type:"primary",class:"button",onClick:_},{default:(0,s.w5)((()=>[(0,s.Uk)("AI润色")])),_:1}),(0,s.Wm)(n,{type:"primary",class:"submit-button",onClick:g},{default:(0,s.w5)((()=>[(0,s.Uk)("AI续写")])),_:1}),(0,s.Wm)(n,{type:"primary",class:"submit-button",onClick:u},{default:(0,s.w5)((()=>[(0,s.Uk)("上传文章")])),_:1})])])]),(0,s._)("div",ha,[(0,s.Wm)(b,{visible:o.value,"onUpdate:visible":t[2]||(t[2]=e=>o.value=e),title:"输入要保存的文章标题",onOk:c},{footer:(0,s.w5)((()=>[(0,s.Wm)(n,{key:"back",onClick:d},{default:(0,s.w5)((()=>[(0,s.Uk)("取消")])),_:1}),(0,s.Wm)(n,{key:"submit",type:"primary",loading:a.value,onClick:c},{default:(0,s.w5)((()=>[(0,s.Uk)("确定")])),_:1},8,["loading"])])),default:(0,s.w5)((()=>[(0,s.Wm)(y,{compact:""},{default:(0,s.w5)((()=>[(0,s.Wm)(f,{value:(0,z.SU)(m),"onUpdate:value":t[1]||(t[1]=e=>(0,z.dq)(m)?m.value=e:m=e)},null,8,["value"])])),_:1})])),_:1},8,["visible"])]),(0,s.Wm)(W,{title:"文章润色结果",size:"large",placement:"left",visible:l.value,onClose:h},{extra:(0,s.w5)((()=>[(0,s.Wm)(n,{style:{"margin-right":"8px"},onClick:h},{default:(0,s.w5)((()=>[(0,s.Uk)("取消")])),_:1}),(0,s.Wm)(n,{type:"primary",onClick:k},{default:(0,s.w5)((()=>[(0,s.Uk)("采纳")])),_:1})])),default:(0,s.w5)((()=>[i.value?((0,s.wg)(),(0,s.j4)(U,{key:0})):(0,s.kq)("",!0),(0,s._)("div",ka,[i.value?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)((0,z.SU)(na()),{key:0,text:(0,z.SU)(p),style:{overflow:"hidden"}},null,8,["text"])),i.value?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)((0,z.SU)(na()),{key:1,text:(0,z.SU)(v),style:{overflow:"hidden"}},null,8,["text"]))])])),_:1},8,["visible"]),(0,s.Wm)(W,{title:"文章续写结果",size:"large",placement:"left",visible:r.value,onClose:h},{extra:(0,s.w5)((()=>[(0,s.Wm)(n,{style:{"margin-right":"8px"},onClick:h},{default:(0,s.w5)((()=>[(0,s.Uk)("取消")])),_:1}),(0,s.Wm)(n,{type:"primary",onClick:k},{default:(0,s.w5)((()=>[(0,s.Uk)("采纳")])),_:1})])),default:(0,s.w5)((()=>[i.value?((0,s.wg)(),(0,s.j4)(U,{key:0})):(0,s.kq)("",!0),(0,s._)("div",ya,[i.value?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)((0,z.SU)(na()),{key:0,text:(0,z.SU)(p),style:{overflow:"hidden"}},null,8,["text"])),i.value?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)((0,z.SU)(na()),{key:1,text:(0,z.SU)(v),style:{overflow:"hidden"}},null,8,["text"]))])])),_:1},8,["visible"])])],64)}}};const Ua=(0,f.Z)(ba,[["__scopeId","data-v-4a3018c0"]]);var Wa=Ua;const xa={id:"post"},Ia={id:"article-container"},Sa={props:{text:String}};var Da=Object.assign(Sa,{__name:"articleContain",setup(e){return na().use(ia(),{Hljs:ca()}),(t,a)=>((0,s.wg)(),(0,s.iD)("div",xa,[(0,s._)("div",Ia,[(0,s.Wm)((0,z.SU)(na()),{text:e.text,style:{overflow:"hidden"}},null,8,["text"])])]))}});const Ca=(0,f.Z)(Da,[["__scopeId","data-v-4401a796"]]);var Ha=Ca;const ja=e=>((0,s.dD)("data-v-3a94e4bc"),e=e(),(0,s.Cn)(),e),Oa={class:"card-widget card-info"},Pa={class:"is-center"},Aa=["src"],Za={class:"author-info__name"},Fa={class:"author-info__description"},Ta={class:"card-info-data site-data is-center"},qa={style:{color:"rgb(44, 116, 209)"}},za=ja((()=>(0,s._)("div",{class:"headline"},"文章",-1))),Na={class:"length-num"},Ba={class:"card-info-social-icons is-center"};function Ma(e,t,a,o,l,n){const r=(0,s.up)("a-button");return(0,s.wg)(),(0,s.iD)("div",Oa,[(0,s._)("div",Pa,[(0,s._)("div",{class:"avatar-img",onClick:t[0]||(t[0]=(...e)=>n.toAuthorPage&&n.toAuthorPage(...e))},[(0,s._)("img",{src:l.imgUrl,alt:"头像"},null,8,Aa)]),(0,s._)("div",Za,(0,k.zw)(l.authorName),1),(0,s._)("div",Fa,(0,k.zw)(l.authorIntroduce),1)]),(0,s._)("div",Ta,[(0,s._)("div",qa,[za,(0,s._)("div",Na,(0,k.zw)(l.articleNum),1)])]),(0,s._)("div",Ba,[l.isFollowed?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(r,{key:0,type:"primary",onClick:n.follow},{default:(0,s.w5)((()=>[(0,s.Uk)("关注")])),_:1},8,["onClick"])),l.isFollowed?((0,s.wg)(),(0,s.j4)(r,{key:1,type:"primary",onClick:n.restoreFollow,style:{"background-color":"rgb(150, 180, 180)"}},{default:(0,s.w5)((()=>[(0,s.Uk)("取消关注")])),_:1},8,["onClick"])):(0,s.kq)("",!0)])])}var Ra={setup(){let e=(0,n.oR)();return{store:e}},props:{authorId:Number},data(){return{articleNum:0,authorName:"",authorIntroduce:"",imgUrl:"",isFollowed:!1}},methods:{toAuthorPage(){bo.push({name:"userprofile",params:{userID:this.authorId}})},judgeFollow(){if(this.store.state.user.is_login&&this.authorId!==this.store.state.user.id){var e=new Headers;e.append("User-Agent","Apifox/1.0.0 (https://www.apifox.cn)");var t=new FormData;t.append("access_token",this.store.state.user.access),t.append("user_id",this.authorId);var a={method:"POST",headers:e,body:t,redirect:"follow"};fetch("http://111.230.109.227:8000/api/is_followed/",a).then((e=>e.json())).then((e=>{console.log(e),this.isFollowed=e["isfollowed"],console.log("判断是否关注"+this.isFollowed)})).catch((e=>console.log("error",e)))}},follow(){if(this.store.state.user.is_login)if(this.authorId===this.store.state.user.id)Ze.ZP.info("不能关注自己");else{var e=new Headers;e.append("User-Agent","Apifox/1.0.0 (https://www.apifox.cn)");var t=new FormData;t.append("access_token",this.store.state.user.access),t.append("follow_user_id",this.authorId);var a={method:"POST",headers:e,body:t,redirect:"follow"};fetch("http://111.230.109.227:8000/api/follow_user/",a).then((e=>e.json())).then((e=>{console.log(e),Ze.ZP.info(e["result"]),this.isFollowed=!0})).catch((e=>console.log("error",e)))}else Ze.ZP.info("请先登录")},restoreFollow(){var e=new Headers;e.append("User-Agent","Apifox/1.0.0 (https://www.apifox.cn)");var t=new FormData;t.append("access_token",this.store.state.user.access),t.append("unfollow_user_id",this.authorId);var a={method:"POST",headers:e,body:t,redirect:"follow"};fetch("http://111.230.109.227:8000/api/unfollow_user/",a).then((e=>e.json())).then((e=>{console.log(e),this.isFollowed=!1,Ze.ZP.info(e["result"])})).catch((e=>console.log("error",e)))}},created(){this.judgeFollow(),console.log(this.authorId),console.log("aaaaaa");var e=new Headers;e.append("User-Agent","Apifox/1.0.0 (https://www.apifox.cn)");var t=new FormData;t.append("user_id",this.authorId);var a={method:"POST",headers:e,body:t,redirect:"follow"};fetch("http://111.230.109.227:8000/api/get_user_info_by_id/",a).then((e=>e.json())).then((e=>{console.log(e),this.articleNum=e["文章数"],this.authorName=e["当前用户名"],this.authorIntroduce=e["自我介绍"],this.imgUrl=e["头像链接"],console.log(this.articleNum)})).catch((e=>console.log("error",e)))}};const Va=(0,f.Z)(Ra,[["render",Ma],["__scopeId","data-v-3a94e4bc"]]);var Ya=Va;const La={class:"navigate"},$a={class:"mypage"},Ea={class:"site-title",style:{color:"white"}},Ka={class:"layout"},Ga={id:"recent-post"},Ja={id:"aside-content"},Qa={class:"sticky"},Xa={id:"aside-button"},eo={id:"article-container"};var to={__name:"ArticlePage",setup(e){na().use(ia(),{Hljs:ca()});const t=(0,n.oR)();let a=(0,z.iH)(),o=(0,z.iH)(),l=(0,z.iH)(),r=(0,z.iH)(),i=(0,z.iH)(),u=(0,z.iH)(),c=(0,z.iH)();const d=(0,h.yj)(),p=parseInt(d.params.articleID);console.log("article id:"+p);var m=new Headers;m.append("User-Agent","Apifox/1.0.0 (https://www.apifox.cn)");var v=new FormData;v.append("article_id",p);var w={method:"POST",headers:m,body:v,redirect:"follow"};fetch("http://111.230.109.227:8000/api/show_article_by_id/",w).then((e=>e.json())).then((e=>{a.value=e["文章信息"]["文章标题"],o.value=e["文章信息"]["文章内容"],l.value=e["文章信息"]["更新时间"].slice(0,10),r.value=" background-image: url("+e["文章信息"]["图片url"]+")",i.value=e["文章信息"]["作者id"],u.value=o.value})).catch((e=>console.log("error",e)));const f=(0,z.iH)(!1),_=()=>{t.state.user.is_login?(b(),f.value=!0):y()},g=e=>{console.log(e),f.value=!1},y=()=>{Ze.ZP.info("使用该功能请先登录")};function b(){var e=new Headers;e.append("User-Agent","Apifox/1.0.0 (https://www.apifox.cn)");var a=new FormData;a.append("access_token",t.state.user.access),a.append("gpt_message","总结提炼一下给定文章，注意文章采用markdown格式书写,返回的文章概要分点，排版要美观些，文章内容如下："+u.value);var o={method:"POST",headers:e,body:a,redirect:"follow"};fetch("http://111.230.109.227:8000/api/gpt_for_chat/",o).then((e=>e.json())).then((e=>{console.log(e),c.value=e["gpt_response"]})).catch((e=>console.log("error",e)))}return(e,t)=>{const n=(0,s.up)("a-button"),u=(0,s.up)("a-spin"),d=(0,s.up)("a-modal");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("header",{class:"article_page_head",style:(0,k.j5)((0,z.SU)(r))},[(0,s._)("div",La,[(0,s.Wm)(Ht)]),(0,s._)("div",$a,[(0,s._)("h1",Ea,(0,k.zw)((0,z.SU)(a)),1),(0,s._)("p",null,"更新时间:"+(0,k.zw)((0,z.SU)(l)),1)])],4),(0,s._)("main",Ka,[(0,s._)("div",Ga,[(0,s.Wm)(Ha,{text:(0,z.SU)(o)},null,8,["text"])]),(0,s._)("div",Ja,[(0,z.SU)(i)?((0,s.wg)(),(0,s.j4)(Ya,{key:0,authorId:(0,z.SU)(i)},null,8,["authorId"])):(0,s.kq)("",!0),(0,s._)("div",Qa,[(0,z.SU)(o)?((0,s.wg)(),(0,s.j4)(aa,{key:0,text:(0,z.SU)(o)},null,8,["text"])):(0,s.kq)("",!0),(0,s._)("div",Xa,[(0,s.Wm)(n,{type:"primary",class:"button",onClick:_},{default:(0,s.w5)((()=>[(0,s.Uk)("提炼文章内容")])),_:1})])])]),(0,s._)("div",null,[(0,s.Wm)(d,{visible:f.value,"onUpdate:visible":t[0]||(t[0]=e=>f.value=e),width:"1000px",title:"文章内容概要",onOk:g},{default:(0,s.w5)((()=>[(0,z.SU)(c)?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(u,{key:0})),(0,s._)("div",eo,[(0,s.Wm)((0,z.SU)(na()),{text:(0,z.SU)(c),style:{overflow:"hidden"}},null,8,["text"])])])),_:1},8,["visible"])])])],64)}}};const ao=(0,f.Z)(to,[["__scopeId","data-v-f5663e9a"]]);var oo=ao;const so={class:"navigation"},lo={class:"layout"},no={id:"recent-post"},ro={id:"post"},io={class:"site-title",style:{color:"white"}},uo={id:"article-container"},co={id:"aside-content"},po={class:"sticky"},mo={id:"aside-button"},vo={class:"submit-modal"},wo={class:"text-contain"},fo={class:"submit-modal"};var _o={__name:"articleModify",setup(e){sa().use(ia(),{Hljs:ca()}),na().use(ia(),{Hljs:ca()});const t=(0,n.oR)(),a=(0,z.iH)(!1),o=(0,z.iH)(!1),l=(0,z.iH)(!1),r=(0,z.iH)(!0),i=(0,z.iH)(!1),u=()=>{p.value?(console.log("show modal"),o.value=!0):Ze.ZP.info("文章内容为空")},c=()=>{a.value=!0,console.log("text"+p.value),console.log("title"+m.value),setTimeout((()=>{a.value=!1,o.value=!1,U()}),2e3)},d=()=>{o.value=!1};let p=(0,z.iH)(""),m=(0,z.iH)(""),v=(0,z.iH)(""),w=(0,z.iH)(""),f=(0,z.iH)("");const _=(0,h.yj)(),g=parseInt(_.params.articleID);function y(e,t){console.log("successfully saved"),console.log(e),console.log(t)}function b(e){var t=new Headers;t.append("User-Agent","Apifox/1.0.0 (https://www.apifox.cn)");var a=new FormData;a.append("article_id",e);var o={method:"POST",headers:t,body:a,redirect:"follow"};fetch("http://111.230.109.227:8000/api/show_article_by_id/",o).then((e=>e.json())).then((e=>{m.value=e["文章信息"]["文章标题"],p.value=e["文章信息"]["文章内容"],w.value=e["文章信息"]["图片url"],f.value=" background-image: url("+w.value+")"})).catch((e=>console.log("error",e)))}function U(){var e=new Headers;e.append("User-Agent","Apifox/1.0.0 (https://www.apifox.cn)");var a=new FormData;a.append("article_title",m.value),a.append("article_content",p.value),a.append("access_token",t.state.user.access),a.append("article_id",g),a.append("image_url",w.value);var o={method:"POST",headers:e,body:a,redirect:"follow"};fetch("http://111.230.109.227:8000/api/update_article_by_id/",o).then((e=>e.json())).then((e=>{console.log(e),console.log("successfully published"),bo.push({name:"article",params:{articleID:g}})})).catch((e=>console.log("error",e)))}function W(){if(p.value){r.value=!0,l.value=!0;var e=new Headers;e.append("User-Agent","Apifox/1.0.0 (https://www.apifox.cn)");var a=new FormData;a.append("access_token",t.state.user.access),a.append("gpt_message","润色一下给定文章，使文章表述更清晰，内容更规整有序。注意文章采用markdown格式书写, 返回的文章要分点，排版要美观，文章内容如下："+p.value);var o={method:"POST",headers:e,body:a,redirect:"follow"};fetch("http://111.230.109.227:8000/api/gpt_for_chat/",o).then((e=>e.json())).then((e=>{console.log(e),r.value=!1,v.value=e["gpt_response"]})).catch((e=>console.log("error",e)))}else Ze.ZP.info("文章内容为空")}function x(){i.value=!0}function I(){f.value=" background-image: url("+w.value+")",i.value=!1}console.log("article id:"+g),b(g);const S=()=>{l.value=!1};function D(){p.value=v.value,S()}return(e,t)=>{const n=(0,s.up)("a-button"),_=(0,s.up)("a-input"),g=(0,s.up)("a-input-group"),h=(0,s.up)("a-modal"),b=(0,s.up)("a-spin"),U=(0,s.up)("a-drawer");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("header",so,[(0,s.Wm)(Ht)]),(0,s._)("main",lo,[(0,s._)("div",no,[(0,s._)("div",ro,[(0,s._)("div",{id:"headimg",style:(0,k.j5)((0,z.SU)(f))},[(0,s._)("h1",io,(0,k.zw)((0,z.SU)(m)),1)],4),(0,s._)("div",uo,[(0,s.Wm)((0,z.SU)(sa()),{modelValue:(0,z.SU)(p),"onUpdate:modelValue":t[0]||(t[0]=e=>(0,z.dq)(p)?p.value=e:p=e),height:"600px",onSave:y},null,8,["modelValue"])])])]),(0,s._)("div",co,[(0,s._)("div",po,[(0,s.Wm)(aa,{text:(0,z.SU)(p)},null,8,["text"]),(0,s._)("div",mo,[(0,s.Wm)(n,{type:"primary",class:"button",onClick:W},{default:(0,s.w5)((()=>[(0,s.Uk)("一键润色")])),_:1}),(0,s.Wm)(n,{type:"primary",class:"submit-button",onClick:x},{default:(0,s.w5)((()=>[(0,s.Uk)("修改封图")])),_:1}),(0,s.Wm)(n,{type:"primary",class:"submit-button",onClick:u},{default:(0,s.w5)((()=>[(0,s.Uk)("上传修改的文章")])),_:1})])])]),(0,s._)("div",vo,[(0,s.Wm)(h,{visible:o.value,"onUpdate:visible":t[2]||(t[2]=e=>o.value=e),title:"输入要保存的文章标题",onOk:c},{footer:(0,s.w5)((()=>[(0,s.Wm)(n,{key:"back",onClick:d},{default:(0,s.w5)((()=>[(0,s.Uk)("取消")])),_:1}),(0,s.Wm)(n,{key:"submit",type:"primary",loading:a.value,onClick:c},{default:(0,s.w5)((()=>[(0,s.Uk)("确定")])),_:1},8,["loading"])])),default:(0,s.w5)((()=>[(0,s.Wm)(g,{compact:""},{default:(0,s.w5)((()=>[(0,s.Wm)(_,{value:(0,z.SU)(m),"onUpdate:value":t[1]||(t[1]=e=>(0,z.dq)(m)?m.value=e:m=e)},null,8,["value"])])),_:1})])),_:1},8,["visible"])]),(0,s.Wm)(U,{title:"文章润色结果",size:"large",placement:"left",visible:l.value,onClose:S},{extra:(0,s.w5)((()=>[(0,s.Wm)(n,{style:{"margin-right":"8px"},onClick:S},{default:(0,s.w5)((()=>[(0,s.Uk)("取消")])),_:1}),(0,s.Wm)(n,{type:"primary",onClick:D},{default:(0,s.w5)((()=>[(0,s.Uk)("采纳")])),_:1})])),default:(0,s.w5)((()=>[r.value?((0,s.wg)(),(0,s.j4)(b,{key:0})):(0,s.kq)("",!0),(0,s._)("div",wo,[r.value?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)((0,z.SU)(na()),{key:0,text:(0,z.SU)(p),style:{overflow:"hidden"}},null,8,["text"])),r.value?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)((0,z.SU)(na()),{key:1,text:(0,z.SU)(v),style:{overflow:"hidden"}},null,8,["text"]))])])),_:1},8,["visible"]),(0,s._)("div",fo,[(0,s.Wm)(h,{visible:i.value,"onUpdate:visible":t[4]||(t[4]=e=>i.value=e),title:"输入要修改的文章封图url",onOk:c},{footer:(0,s.w5)((()=>[(0,s.Wm)(n,{key:"back",onClick:d},{default:(0,s.w5)((()=>[(0,s.Uk)("取消")])),_:1}),(0,s.Wm)(n,{key:"submit",type:"primary",loading:a.value,onClick:I},{default:(0,s.w5)((()=>[(0,s.Uk)("确定")])),_:1},8,["loading"])])),default:(0,s.w5)((()=>[(0,s.Wm)(g,{compact:""},{default:(0,s.w5)((()=>[(0,s.Wm)(_,{value:(0,z.SU)(w),"onUpdate:value":t[3]||(t[3]=e=>(0,z.dq)(w)?w.value=e:w=e)},null,8,["value"])])),_:1})])),_:1},8,["visible"])])])],64)}}};const go=(0,f.Z)(_o,[["__scopeId","data-v-2af7d9d9"]]);var ho=go;const ko=[{path:"/",name:"home",component:Lt},{path:"/myarticle/",name:"myarticle",component:ut},{path:"/writecenter/",name:"writecenter",component:Wa},{path:"/article/:articleID/",name:"article",component:oo},{path:"/articleModify/:articleID",name:"articleModify",component:ho},{path:"/login/",name:"login",component:R},{path:"/register/",name:"register",component:G},{path:"/FollowList/",name:"FollowList",component:ne},{path:"/userprofile/:userID/",name:"userprofile",component:Pt},{path:"/404/",name:"404",component:ee},{path:"/:pathMatch(.*)*/",redirect:{name:"404"}}],yo=(0,h.p7)({history:(0,h.PO)(),routes:ko});var bo=yo,Uo=a(6540);a(2467);(0,o.ri)(g).use(v).use(bo).use(Uo.ZP).mount("#app")}},t={};function a(o){var s=t[o];if(void 0!==s)return s.exports;var l=t[o]={exports:{}};return e[o].call(l.exports,l,l.exports,a),l.exports}a.m=e,function(){var e=[];a.O=function(t,o,s,l){if(!o){var n=1/0;for(c=0;c<e.length;c++){o=e[c][0],s=e[c][1],l=e[c][2];for(var r=!0,i=0;i<o.length;i++)(!1&l||n>=l)&&Object.keys(a.O).every((function(e){return a.O[e](o[i])}))?o.splice(i--,1):(r=!1,l<n&&(n=l));if(r){e.splice(c--,1);var u=s();void 0!==u&&(t=u)}}return t}l=l||0;for(var c=e.length;c>0&&e[c-1][2]>l;c--)e[c]=e[c-1];e[c]=[o,s,l]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p="/"}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,o){var s,l,n=o[0],r=o[1],i=o[2],u=0;if(n.some((function(t){return 0!==e[t]}))){for(s in r)a.o(r,s)&&(a.m[s]=r[s]);if(i)var c=i(a)}for(t&&t(o);u<n.length;u++)l=n[u],a.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return a.O(c)},o=self["webpackChunkgenblog"]=self["webpackChunkgenblog"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=a.O(void 0,[998],(function(){return a(1681)}));o=a.O(o)})();
//# sourceMappingURL=app.35e0d570.js.map